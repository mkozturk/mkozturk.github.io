<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kaan Öztürk">
<meta name="dcterms.date" content="2025-02-15">
<meta name="description" content="Really, you should always switch.">

<title>Generalizations of the Monty Hall Problem – Kaan Öztürk</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<script src="../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap-cd5c7829bea33bf5e520dec996e010c7.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-5PQNVMN09N"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-5PQNVMN09N', { 'anonymize_ip': true});
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../../../styles.css">
<meta name="twitter:title" content="Generalizations of the Monty Hall Problem – Kaan Öztürk">
<meta name="twitter:description" content="Really, you should always switch.">
<meta name="twitter:image" content="https://mkozturk.com/posts/en/2025/generalizations-monty-hall/14d37feb-6c6e-4196-b0cd-04a095bd4301.webp">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../../index.html">
    <span class="navbar-title">Kaan Öztürk</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../../../blog.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Generalizations of the Monty Hall Problem</h1>
                  <div>
        <div class="description">
          Really, you should always switch.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">probability</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Kaan Öztürk </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 15, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#chance-tree-analysis" id="toc-chance-tree-analysis" class="nav-link active" data-scroll-target="#chance-tree-analysis">Chance tree analysis</a></li>
  <li><a href="#more-than-three-doors" id="toc-more-than-three-doors" class="nav-link" data-scroll-target="#more-than-three-doors">More than three doors</a></li>
  <li><a href="#simulation-of-monty-hall-with-multiple-doors" id="toc-simulation-of-monty-hall-with-multiple-doors" class="nav-link" data-scroll-target="#simulation-of-monty-hall-with-multiple-doors">Simulation of Monty Hall with multiple doors</a></li>
  <li><a href="#host-opens-more-than-one-door" id="toc-host-opens-more-than-one-door" class="nav-link" data-scroll-target="#host-opens-more-than-one-door">Host opens more than one door</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><img src="14d37feb-6c6e-4196-b0cd-04a095bd4301.webp" class="img-fluid"></p>
<p><a href="https://en.wikipedia.org/wiki/Monty_Hall_problem">The Monty Hall Problem</a>, once an apparent paradox that perplexed <a href="https://en.wikipedia.org/wiki/Monty_Hall_problem">even the best minds</a>, it has become a common example in all kinds of probability books. So, probably an introduction to the problem is not needed. But in case you need it, here’s a description from Wikipedia:</p>
<blockquote class="blockquote">
<p>Suppose you’re on a game show, and you’re given the choice of three doors: Behind one door is a car; behind the others, goats. You pick a door, say No.&nbsp;1, and the host, who knows what’s behind the doors, opens another door, say No.&nbsp;3, which has a goat. He then says to you, “Do you want to pick door No.&nbsp;2?” Is it to your advantage to switch your choice?</p>
</blockquote>
<p>If you had the slightest interest in probability in the last 20 years, you’ve read that switching increases your odds tremendously. It’s not easy to grasp, though. It goes against our intuition.</p>
<p>A long time ago, I had written a <a href="http://www.acikbilim.com/2013/01/dosyalar/monty-hall-problemi.html">popular article on it</a> in Turkish. Still, I did not feel like I completely grasped the idea. So I thought more deeply on it.</p>
<p>While I’m on it, I developed some generalizations of the problem: What if we have more than three doors? What if we have many doors and the host opens more than one of them?</p>
<p>It turns out that, even with these generalizations, you should always switch. Read on to see why.</p>
<section id="chance-tree-analysis" class="level2">
<h2 class="anchored" data-anchor-id="chance-tree-analysis">Chance tree analysis</h2>
<p>Let’s label the doors as A, B, and C. Assume that the prize is behind door C. Since we can label the doors any way we like, there will be no loss of generality.</p>
<p>After we choose a door, the host opens another door. He deliberately opens the door that doesn’t have the prize. If you chose A, he’ll open B. If you chose B, he’ll open A. If you chose C, he’ll open either A or B. After that, you can either stay at the door you chose, or switch to the other closed door.</p>
<p>Here’s the chance tree for the process:</p>
<p><img src="Monty_Hall_Decision_Tree.jpg" class="img-fluid"></p>
<p>Wins are shown with red circles. When we switch, we win the prize in two of the outcomes. When we stay, we also win in two outcomes, but the probabilities of these are not equal. Winning chance when staying is half of the winning chance when switching (just multiply the branch probabilities).</p>
<p>Here’s a simpler way to look at this: When we choose A or B, switching guarantees a win, and staying guarantees a loss. Conversely, when we choose C, switching guarantees a loss, while staying guarantees a win.</p>
<p>If we choose doors randomly at the start, probability of choosing A or B is 2/3, while the probability of choosing C is 1/3. Then, winning probability with switching is 2/3.</p>
<p>Now let’s generalize this analysis to many doors.</p>
</section>
<section id="more-than-three-doors" class="level2">
<h2 class="anchored" data-anchor-id="more-than-three-doors">More than three doors</h2>
<p>Suppose we have 4, 5, or 100 doors, instead of 3. The rules are the same: The host opens a single door knowing that it doesn’t have the prize. We then have the option to switch to one of the unopened doors, or stay at the one we originally chose. The game ends afterward, and we win or lose based on the final door of our choosing.</p>
<p>For example, suppose there are four doors, and the prize is behind door number 4. We initially choose door #1. The host can open doors #2 or #3. Suppose he opened #2. If we want, we can switch to #3 or #4. If we stay, we lose. If we switch to #4, we win.</p>
<p>Let the total number of doors be <span class="math inline">\(n\)</span>. We can see the following to hold:</p>
<ul>
<li>The probability of choosing the right door at the start is <span class="math inline">\(1/n\)</span>.</li>
<li>The probability of choosing a wrong door at the start is <span class="math inline">\((n-1)/n\)</span></li>
<li>If we choose a wrong door and we switch, the probability of win is <span class="math inline">\(1/(n-2)\)</span>. (There are <span class="math inline">\(n-2\)</span> doors available to switch, and only one is the right one.)</li>
<li>If we choose a wrong door and we stay, the probability of win is 0.</li>
<li>If we choose the right door and we switch, the probability of win is 0.</li>
<li>If we choose the right door and we stay, the probability of win is 1.</li>
</ul>
<p>Combining these in a formal way, we can figure out the probability of win with switching:</p>
<p><span class="math display">\[\begin{align*}
\mathrm{P(win|switch)} &amp;= \mathrm{P(win|switch, wrong\ door)\cdot P(wrong\ door)} \\
&amp;\ +\mathrm{P(win|switch, right\ door)\cdot P(right\ door)}\\
&amp;= \frac{1}{n-2} \frac{n-1}{n} + 0\cdot\frac{1}{n}\\
&amp;= \frac{n-1}{n(n-2)}
\end{align*}\]</span></p>
<p>And the probability of win with staying is: <span class="math display">\[\begin{align*}
\mathrm{P(win|stay)} &amp;= \mathrm{P(win|stay, wrong\ door)\cdot P(wrong\ door)} \\
&amp;\ +\mathrm{P(win|stay, right\ door)\cdot P(right\ door)}\\
&amp;= 0 \cdot \frac{n-1}{n} + 1\cdot\frac{1}{n}\\
&amp;= \frac{1}{n}
\end{align*}\]</span></p>
<p>Setting <span class="math inline">\(n=3\)</span>, we get the probabilities we found before:</p>
<p><span class="math display">\[\begin{align*}
\mathrm{P(win|switch)} &amp;= 2/3 \\
\mathrm{P(win|stay)}   &amp;= 1/3 \\
\end{align*}\]</span></p>
<p>With four doors (<span class="math inline">\(n=4\)</span>), the probabilities are <span class="math display">\[\begin{align*}
\mathrm{P(win|switch)} &amp;= 3/8 \\
\mathrm{P(win|stay)}   &amp;= 1/4 \\
\end{align*}\]</span></p>
<p>The probabilities do not add up to 1 because when <span class="math inline">\(n&gt;3\)</span> there are other unopened doors, and the prize may be behind one of them.</p>
<p>In general, since <span class="math inline">\(\frac{n-1}{n(n-2)}&gt;\frac{1}{n}\)</span> switching always increases the chance of win. However, the advantage of switching becomes less as the number of doors increases.</p>
</section>
<section id="simulation-of-monty-hall-with-multiple-doors" class="level2">
<h2 class="anchored" data-anchor-id="simulation-of-monty-hall-with-multiple-doors">Simulation of Monty Hall with multiple doors</h2>
<p>Here’s a simulation of winning probability with arbitrary number of doors, using random trials. We run it for 3, 4, 5, 6, 10 and 100 doors.</p>
<div id="cell-3" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> monty_hall_simulation(switch_door, ndoors, ntries<span class="op">=</span><span class="fl">1e5</span>):</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    wins <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    alldoors <span class="op">=</span> <span class="bu">range</span>(ndoors)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> tries <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">int</span>(ntries)):</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        winner <span class="op">=</span> random.choice(alldoors)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>        selected <span class="op">=</span> random.choice(alldoors)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        openable_doors <span class="op">=</span> [d <span class="cf">for</span> d <span class="kw">in</span> alldoors <span class="cf">if</span> d <span class="kw">not</span> <span class="kw">in</span> [winner, selected]]</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>        opened <span class="op">=</span> random.choice(openable_doors)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>        openable_doors.remove(opened)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> switch_door:</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> selected<span class="op">==</span>winner:</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>                switchable_doors <span class="op">=</span> openable_doors</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>                switchable_doors <span class="op">=</span> openable_doors <span class="op">+</span> [winner]</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>            decision <span class="op">=</span> random.choice(switchable_doors)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>            decision <span class="op">=</span> selected</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> decision<span class="op">==</span>winner:</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>            wins <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wins<span class="op">/</span>ntries</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> number_of_doors <span class="kw">in</span> [<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">10</span>,<span class="dv">100</span>]:</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    p1 <span class="op">=</span> monty_hall_simulation(switch_door<span class="op">=</span><span class="va">True</span>, ndoors<span class="op">=</span>number_of_doors)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    p2 <span class="op">=</span> monty_hall_simulation(switch_door<span class="op">=</span><span class="va">False</span>, ndoors<span class="op">=</span>number_of_doors)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>number_of_doors<span class="sc">:3d}</span><span class="ss"> doors, P(win|switch) = </span><span class="sc">{</span>p1<span class="sc">:.4f}</span><span class="ss">, P(win|stay) = </span><span class="sc">{</span>p2<span class="sc">:.4f}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  3 doors, P(win|switch) = 0.6653, P(win|stay) = 0.3320
  4 doors, P(win|switch) = 0.3737, P(win|stay) = 0.2493
  5 doors, P(win|switch) = 0.2686, P(win|stay) = 0.1995
  6 doors, P(win|switch) = 0.2109, P(win|stay) = 0.1683
 10 doors, P(win|switch) = 0.1113, P(win|stay) = 0.0992
100 doors, P(win|switch) = 0.0103, P(win|stay) = 0.0098</code></pre>
</div>
</div>
</section>
<section id="host-opens-more-than-one-door" class="level2">
<h2 class="anchored" data-anchor-id="host-opens-more-than-one-door">Host opens more than one door</h2>
<p>Now suppose that after you make your initial choice, the host opens not one, but multiple doors. Again, with the knowledge that none of the opened doors contain the prize.</p>
<p>This makes sense only if there are more than three doors. With four doors, the host can open one or two doors. With five doors, the host can open one, two, or three doors, etc. (The number is fixed for the game, not randomly decided by the host.) That way, you always have a chance of switching to another doors.</p>
<p>If there are <span class="math inline">\(n\)</span> doors, then the number <span class="math inline">\(k\)</span> of doors opened by the host must be constrained to <span class="math inline">\(k&lt;=n-2\)</span>.</p>
<p>The analysis above is done for the case of <span class="math inline">\(n&gt;3\)</span> and <span class="math inline">\(k=1\)</span>. If we assume general <span class="math inline">\(k\)</span>, the only factor we need to change is the probability of winning, given a wrong initial choice and switching.</p>
<p><span class="math display">\[\mathrm{P(win|stay, wrong\ door)} = \frac{1}{n-k-1}\]</span></p>
<p>All other probabilities are the same. With that, the winning probabilities with switching and staying strategies are:</p>
<p><span class="math display">\[\begin{align*}
\mathrm{P(win|switch)} &amp;= \frac{n-1}{n-k-1}\frac{1}{n}\\
\mathrm{P(win|stay)} &amp;= \frac{1}{n}
\end{align*}\]</span></p>
<p>Since it holds that <span class="math display">\[\frac{n-1}{n-k-1}\frac{1}{n} &gt; \frac{1}{n},\]</span> switching is always preferable.</p>
<p>Here are some numerical values for the winning probability when switching:</p>
<div id="cell-5" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n <span class="kw">in</span> (<span class="dv">4</span>,<span class="dv">5</span>):</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> k <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n<span class="op">-</span><span class="dv">2</span><span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>        p1 <span class="op">=</span> (n<span class="op">-</span><span class="dv">1</span>)<span class="op">/</span>(n<span class="op">-</span>k<span class="op">-</span><span class="dv">1</span>)<span class="op">/</span>n</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>        p2 <span class="op">=</span> <span class="dv">1</span><span class="op">/</span>n</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"n = </span><span class="sc">{</span>n<span class="sc">:3d}</span><span class="ss">, k = </span><span class="sc">{</span>k<span class="sc">:2d}</span><span class="ss">, P(win|switch) = </span><span class="sc">{</span>p1<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> k <span class="kw">in</span> (<span class="dv">1</span>, <span class="dv">50</span>, <span class="dv">95</span>, <span class="dv">98</span>):</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    p1 <span class="op">=</span> (n<span class="op">-</span><span class="dv">1</span>)<span class="op">/</span>(n<span class="op">-</span>k<span class="op">-</span><span class="dv">1</span>)<span class="op">/</span>n</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    p2 <span class="op">=</span> <span class="dv">1</span><span class="op">/</span>n</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"n = </span><span class="sc">{</span>n<span class="sc">:3d}</span><span class="ss">, k = </span><span class="sc">{</span>k<span class="sc">:2d}</span><span class="ss">, P(win|switch) = </span><span class="sc">{</span>p1<span class="sc">:.3f}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>n =   4, k =  1, P(win|switch) = 0.375
n =   4, k =  2, P(win|switch) = 0.750
n =   5, k =  1, P(win|switch) = 0.267
n =   5, k =  2, P(win|switch) = 0.400
n =   5, k =  3, P(win|switch) = 0.800
n = 100, k =  1, P(win|switch) = 0.010
n = 100, k = 50, P(win|switch) = 0.020
n = 100, k = 95, P(win|switch) = 0.247
n = 100, k = 98, P(win|switch) = 0.990</code></pre>
</div>
</div>
<p>Now suppose that the host opens a <em>random number of doors</em> <span class="math inline">\(k\)</span> between 1 and <span class="math inline">\(n-2\)</span>, choosing this number with equal probability.</p>
<p>Then, the winning probability with switching is the average of these probabilities for fixed <span class="math inline">\(k\)</span>:</p>
<p><span class="math display">\[\begin{align*}
\mathrm{P(win | switch)} &amp; = \sum_{k=1}^{n-2} \frac{1}{n-2} \frac{n-1}{n(n-k-1)} \\
&amp; = \frac{n-1}{n(n-2)} \sum_{k=1}^{n-2} \frac{1}{n-k-1} \\
&amp; = \frac{n-1}{n(n-2)}\left ( \frac{1}{n-2} + \frac{1}{n-1} + \cdots + 1 \right ) \\
&amp; = \frac{n-1}{n(n-2)} H_{n-2}
\end{align*}\]</span></p>
<p>where <span class="math inline">\(H_n\)</span> are the <em>harmonic numbers</em>.</p>
<p>The winning probability with staying is still <span class="math inline">\(1/n\)</span>, as it does not depend on the number of opened doors.</p>
<p>As the harmonic numbers are always greater than or equal to 1, it holds that</p>
<p><span class="math display">\[ \frac{n-1}{n(n-2)} H_{n-2} &gt; \frac{1}{n},\]</span></p>
<p>so, it is still favorable to switch.</p>
<p>Here are some numerical values for the winning probability.</p>
<div id="cell-7" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n <span class="kw">in</span> (<span class="dv">4</span>,<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">100</span>):</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    hn <span class="op">=</span> <span class="bu">sum</span>([<span class="dv">1</span><span class="op">/</span>i <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,n<span class="op">-</span><span class="dv">1</span>)])</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    p1 <span class="op">=</span> (n<span class="op">-</span><span class="dv">1</span>)<span class="op">/</span>(n<span class="op">-</span><span class="dv">2</span>)<span class="op">*</span>hn<span class="op">/</span>n</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    p2 <span class="op">=</span> <span class="dv">1</span><span class="op">/</span>n</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"n = </span><span class="sc">{</span>n<span class="sc">:3d}</span><span class="ss">, P(win|switch) = </span><span class="sc">{</span>p1<span class="sc">:.3f}</span><span class="ss">, P(win|stay) = </span><span class="sc">{</span>p2<span class="sc">:.3f}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>n =   4, P(win|switch) = 0.562, P(win|stay) = 0.250
n =   5, P(win|switch) = 0.489, P(win|stay) = 0.200
n =  10, P(win|switch) = 0.306, P(win|stay) = 0.100
n = 100, P(win|switch) = 0.052, P(win|stay) = 0.010</code></pre>
</div>
</div>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-öztürk2025" class="csl-entry quarto-appendix-citeas" role="listitem">
Öztürk, Kaan. 2025. <span>“Generalizations of the Monty Hall
Problem.”</span> February 15, 2025. <a href="https://mkozturk.com/posts/en/2025/generalizations-monty-hall/">https://mkozturk.com/posts/en/2025/generalizations-monty-hall/</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/mkozturk\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="mkozturk/mkozturk.github.io" data-repo-id="R_kgDOKrFBxg" data-category="Announcements" data-category-id="DIC_kwDOKrFBxs4CmpqI" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="preferred_color_scheme" data-lang="en" crossorigin="anonymous" data-loading="lazy" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="preferred_color_scheme">
<input type="hidden" id="giscus-alt-theme" value="preferred_color_scheme">
</div> <!-- /content -->




</body></html>